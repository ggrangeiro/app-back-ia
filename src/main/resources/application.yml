micronaut:
  serde:
    deserialization:
      ignore-unknown: true
  server:
    cors:
      enabled: true
      configurations:
        web:
          allowed-origins:
            - "http://localhost"
            - "https://localhost"
            - "capacitor://localhost"
            - "http://localhost:3000"
            - "http://localhost:5173"
            - "https://fitai-analyzer-732767853162.us-west1.run.app"
            - "https://analisa-exercicio-732767853162.southamerica-east1.run.app"
            - "https://app-back-ia-732767853162.southamerica-east1.run.app"
          allowed-methods:
            - GET
            - POST
            - PUT
            - DELETE
            - OPTIONS
          allowed-headers:
            - "*" # Permite qualquer header 

datasources:
  default:
    url: "jdbc:mysql:///exercicio-fit?cloudSqlInstance=gen-lang-client-0004040174:us-west1:banco-fit&socketFactory=com.google.cloud.sql.mysql.SocketFactory"    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: "124578Ka@"
    dialect: MYSQL
    hikari:
      maximum-pool-size: 1
      minimum-idle: 1
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      initialization-fail-timeout: -1 # Não trava o boot se o banco demorar
      connection-timeout: 60000 # Aumente para 60s devido à distância (EUA -> Brasil)

flyway:
  datasources:
    default:
      enabled: false

# Resend email service configuration
resend:
  api-key: ${RESEND_API_KEY:}
  from-email: ${RESEND_FROM_EMAIL:onboarding@fitanalizer.com.br}

# Application settings
app:
  frontend-url: ${APP_FRONTEND_URL:http://localhost:5173}
  backend-url: ${APP_BACKEND_URL:https://app-back-ia-732767853162.southamerica-east1.run.app}

# MercadoPago configuration
mercadopago:
  access-token: ${MP_ACCESS_TOKEN:${_MP_ACCESS_TOKEN:}}
  secret-key: ${MP_SECRET_KEY:${_MP_SECRET_KEY:}}
  public-key: ${MP_PUBLIC_KEY:APP_USR-d60cd062-292b-4678-89be-16f8bcedc002}
  webhook-url: ${MP_WEBHOOK_URL:${_MP_WEBHOOK_URL:}}
  back-url:
    success: ${MP_SUCCESS_URL:https://fitanalizer.com.br/checkout/success}
    failure: ${MP_FAILURE_URL:https://fitanalizer.com.br/checkout/failure}
    pending: ${MP_PENDING_URL:https://fitanalizer.com.br/checkout/pending}

# GCP Configuration
gcp:
  storage:
    bucket: ${GCS_BUCKET:imagem-ai}